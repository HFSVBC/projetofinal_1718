PRAGMA foreign_keys = ON;CREATE TABLE Aluno (ID INTEGER PRIMARY KEY AUTOINCREMENT, NumAluno INTEGER NOT NULL, CONSTRAINT NumRest UNIQUE (NumAluno));
CREATE TABLE Sala (ID INTEGER PRIMARY KEY AUTOINCREMENT, Bloco INTEGER NOT NULL, Piso INTEGER NOT NULL, Numero INTEGER NOT NULL, LotacaoMax INTEGER);
CREATE TABLE Professor (ID INTEGER PRIMARY KEY AUTOINCREMENT, NumProfessor INTEGER UNIQUE NOT NULL, CONSTRAINT NumRestProf UNIQUE (NumProfessor));
CREATE TABLE Disciplina (ID INTEGER PRIMARY KEY AUTOINCREMENT, Codigo INTEGER UNIQUE, Designacao TEXT, Creditos INTEGER NOT NULL, Regente INTEGER, FOREIGN KEY (Regente) REFERENCES Professor(NumProfessor));
CREATE TABLE Turma (ID INTEGER PRIMARY KEY AUTOINCREMENT, NInscritos INTEGER, MaxInscritos INTEGER, Tipo TEXT, IDDisciplina INTEGER, NumProf INTEGER, FOREIGN KEY (IDDisciplina) REFERENCES Disciplina(ID), FOREIGN KEY (NumProf) REFERENCES Professor(NumProfessor));
CREATE TABLE Aula (ID INTEGER PRIMARY KEY AUTOINCREMENT, HoraInicio TEXT, HoraFrom TEXT, IDSala INTEGER, IDTurma INTEGER, FOREIGN KEY (IDSala) REFERENCES Sala(ID), FOREIGN KEY (IDTurma) REFERENCES Turma(ID));
CREATE TABLE TurmaAluno (ID INTEGER PRIMARY KEY AUTOINCREMENT, NumAluno INTEGER, IDTurma INTEGER, FOREIGN KEY (NumAluno) REFERENCES Aluno(NumAluno), FOREIGN KEY (IDTurma) REFERENCES Turma(ID));
CREATE TABLE Acessos (ID INTEGER PRIMARY KEY AUTOINCREMENT, IDSala INTEGER, NumAluno INTEGER, FOREIGN KEY(NumAluno) REFERENCES Aluno(NumAluno), FOREIGN KEY (IDSala) REFERENCES Sala(ID);